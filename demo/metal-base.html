<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Metal base demo</title>

  <script type="module">
    import { MetalElement, html } from '../src/metal-element.js';
    
    class DemoElement extends MetalElement {

      static get properties() {
        return {
          firstName: {
            set: String,
            attribute: 'first-name',
            changedHandler: '_firstNameChanged',
            defaultValue: 'John'
          },
          lastName: {
            set: String,
            attribute: 'last-name',
            changedHandler: function(oldValue, newValue) {
              console.info('last name changed!', oldValue, newValue)
            },
            changedEventName: 'last-name-changed'
          },
          age: {
            set: Number
          }
        }
      }

      static get propertiesChangedHandlers() {
        return {
          '_nameChanged': ['firstName', 'lastName']
        }
      }

      _nameChanged(firstName, lastName) {
        console.info('name changed!', firstName, lastName);
      }

      _firstNameChanged(oldValue, newValue) {
        console.info('first name changed!', oldValue, newValue)
      }

      get template() {
        return html`
          Hello, ${this.firstName} ${this.lastName}!
        `
      }

    }

    window.customElements.define('demo-element', DemoElement);
  </script>  
</head>
<body>
  <demo-element id="demo"></demo-element>
  <script>
    demo.addEventListener('last-name-changed', _handleEvent)

    function _handleEvent(e) {
      console.info(e.type, e.detail);
    }

    customElements.whenDefined('demo-element').then(() => {
      demo.lastName = 'Doe';
      demo.age = 55;
    })
  </script>
  
</body>
</html>
